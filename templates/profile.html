{% extends 'layout.html' %}

{% block title %}
    Profile Page
{% endblock %}

{% block content %}
<div class="container py-5">
    <div class="d-flex flex-column flex-md-row align-items-center justify-content-between mb-4">
        <div>
            <h1 class="display-4 fw-bold">
                Welcome, <span class="text-primary">@{{ user.username }}</span>
            </h1>
            <p class="text-muted fs-5">Manage your profile and update credentials</p>
        </div>
        <div class="profile-pic shadow-sm">
            <img src="https://api.dicebear.com/6.x/lorelei/svg?seed={{ user.username }}" alt="Avatar">
        </div>
    </div>

    <form action="" method="post" class="p-4 bg-light shadow-sm rounded-4">
        <div class="row g-3">
            <div class="col-md-6">
                <label for="username" class="form-label fw-semibold">Username</label>
                <input type="text" name="username" id="username" value="{{ user.username }}" class="form-control" required>
            </div>

            <div class="col-md-6">
                <label for="name" class="form-label fw-semibold">Full Name</label>
                <input type="text" name="name" id="name" value="{{ user.name }}" class="form-control">
            </div>

            <div class="col-md-6">
                <label for="cpassword" class="form-label fw-semibold">Current Password</label>
                <input type="password" name="cpassword" id="cpassword" class="form-control" required>
            </div>

            <div class="col-md-6">
                <label for="password" class="form-label fw-semibold">New Password</label>
                <input type="password" name="password" id="password" class="form-control" required>
            </div>
        </div>

        <div class="d-flex justify-content-between align-items-center mt-4">
            <button type="submit" class="btn btn-primary px-4">
                <i class="fas fa-save me-1"></i> Update Profile
            </button>
            <a href="{{ url_for('logout') }}" class="btn btn-outline-danger">
                <i class="fas fa-sign-out-alt me-1"></i> Logout
            </a>
        </div>
    </form>
</div>
{% endblock %}

{% block style %}
<style>
    .profile-pic {
        width: 120px;
        height: 120px;
        border-radius: 50%;
        overflow: hidden;
        border: 4px solid #dee2e6;
        background-color: white;
    }

    .profile-pic img {
        width: 100%;
        height: 100%;
        object-fit: cover;
    }

    form input[type="text"],
    form input[type="password"] {
        transition: all 0.2s ease-in-out;
    }

    form input:focus {
        box-shadow: 0 0 0 0.2rem rgba(13, 110, 253, 0.25);
    }
</style>
{% endblock %}
